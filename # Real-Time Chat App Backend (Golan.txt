# Real-Time Chat App Backend (Golang + WebSocket + Redis + MongoDB)

This project is a real-time chat server built using Golang. It supports public chat broadcasting and private 1-on-1 messaging using WebSocket. Redis is used for Pub/Sub messaging, and MongoDB is used to persist message history. Authentication is handled using JWT tokens.

---

## ğŸš€ Features

- âœ… **Real-time messaging** with WebSockets
- âœ… **Private 1-to-1 chat** and **public chat broadcasting**
- âœ… **Redis Pub/Sub** for scalable message distribution
- âœ… **MongoDB integration** for storing chat history
- âœ… **JWT-based authentication**
- âœ… Graceful handling of client connect/disconnect
- âœ… REST API to retrieve chat history between two users

---

## ğŸ› ï¸ Tech Stack

- **Golang**
- **Gin** â€“ Web framework
- **WebSocket** â€“ Real-time communication
- **Redis** â€“ Pub/Sub system
- **MongoDB** â€“ NoSQL database to store messages
- **JWT (JSON Web Tokens)** â€“ Authentication

---

## ğŸ“ Project Structure

chat-app/
â”œâ”€â”€ auth/ # JWT token creation and validation
â”œâ”€â”€ models/ # Message and user model definitions
â”œâ”€â”€ mongo/ # MongoDB connection setup
â”œâ”€â”€ redis/ # Redis Pub/Sub functions
â”œâ”€â”€ websocket/ # WebSocket logic, client management
â”œâ”€â”€ main.go # App entry point and routes

yaml
Copy
Edit

---

## ğŸ”§ Prerequisites

Make sure the following services are running:

- Redis on `localhost:6379`
- MongoDB on `mongodb://localhost:27017`

You can use Docker for this:

```bash
docker run -d -p 6379:6379 redis
docker run -d -p 27017:27017 mongo
ğŸ“¦ Installation
Clone the repository

bash
Copy
Edit
git clone https://github.com/your-username/chat-app.git
cd chat-app
Install dependencies

bash
Copy
Edit
go mod tidy
Run the application

bash
Copy
Edit
go run main.go
The server will start at: http://localhost:8080

ğŸ” Authentication
Each WebSocket connection requires a valid JWT token passed in the Sec-WebSocket-Protocol header.

You can create tokens using your own logic or temporary auth endpoint.

WebSocket client example:

javascript
Copy
Edit
const socket = new WebSocket(
  "ws://localhost:8080/ws",
  "Bearer <your-jwt-token>"
);
ğŸ“¡ WebSocket Communication
Send Message (JSON Format)
json
Copy
Edit
{
  "to": "bob",            // Omit or leave empty for public message
  "content": "Hello Bob!"
}
Receive Message (JSON Format)
json
Copy
Edit
{
  "from": "alice",
  "to": "bob",
  "content": "Hello Bob!",
  "timestamp": "2025-07-16T14:00:00Z"
}
ğŸ” REST API
Get Chat History Between Two Users
http
Copy
Edit
GET /messages/:username
Headers:
Authorization: Bearer <token>
Returns all messages between logged-in user and the specified :username.

ğŸ§¼ Graceful Handling
On connection: user is registered and mapped with their WebSocket

On disconnect: user is removed and WebSocket is cleaned up

Uses Redis channels for pub/sub and distributes messages to correct clients

ğŸ§ª Example Test Flow
Get a JWT for two users: alice and bob

Connect both via WebSocket using token

Send messages between them

Check MongoDB to confirm messages are stored

Hit /messages/bob to see chat history with bob

ğŸ“ License
This project is licensed under the MIT License.

ğŸ™‹â€â™‚ï¸ Author
Dishank Agrawal
Backend Developer
LinkedIn